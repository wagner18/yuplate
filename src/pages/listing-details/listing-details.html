<ion-header>

  <ion-navbar>
    <ion-title>Details</ion-title>
    <ion-buttons end>
	    <button ion-button icon-only color="royal" (click)="shareListing()">
	      <ion-icon ios="ios-share" md="md-share"></ion-icon>
	    </button>
	  </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content class="listing-content">

	<ion-card class="item-card-content">

    <ion-slides (click)="presentImageModal()">
      <ion-slide *ngFor="let media of listing?.medias" style="background-color: white">
      <preload-image [ratio]="{w:3, h:3}" [src]="media.media_path" title="listing.title"></preload-image>
      </ion-slide>
    </ion-slides>

    <ion-badge class="price-badge" item-right>
      {{ listing.price?.currency }}
      {{ listing.price?.main_price }}
    </ion-badge>

<!--     <button class="favorite-button" ion-button clear>
      <ion-icon isActive="1" name='md-heart-outline'></ion-icon>
    </button> -->

    <ion-card-content>
      <ion-card-title class="item-title">
        {{listing.title}}
      </ion-card-title>
<!--       <p class="item-text">
        {{listing.summary}}
      </p> -->
      <ion-badge item-center class="delivery_options" *ngIf="listing.delivery">
        Delivery
      </ion-badge>
      <ion-badge item-center class="delivery_options" *ngIf="listing.carryout">
        Carryout
      </ion-badge>
      <ion-badge item-center class="delivery_options" *ngIf="listing.shipping">
        Shipping
      </ion-badge>
    </ion-card-content>

    <ion-row no-padding class="social-row">
      <ion-col no-padding text-center width-100>
        <!-- <rating [ngModel]="listing.total_rate" max="5" read-only="true"></rating> -->
        <button ion-button clear small icon-left (click)="setAsFavorite()">
          <ion-icon isActive="1" name='heart'></ion-icon>
          Favorite
        </button>
        <button ion-button clear small icon-left (click)="setAsFavorite()">
          <ion-icon isActive="1" name='ios-chatbubbles-outline'></ion-icon>
          Ask a question
        </button>
        <button ion-button clear small icon-left>
          <ion-icon name='share-alt'></ion-icon>
          Share
        </button>
      </ion-col>
    </ion-row>

  </ion-card>

  <ion-list>
    <ion-list-header>Overview</ion-list-header>
    <ion-row class="listing-description">
      <ion-col width-100>
        <p class="item-text">
          {{listing.summary}}
        </p>
      </ion-col>
    </ion-row>

    <ion-list-header>Description</ion-list-header>
    <ion-row class="listing-description">
      <ion-col width-100>
        <p class="item-text">
          {{listing.description}}
        </p>
      </ion-col>
    </ion-row>
    <ion-item>
      <ion-icon item-left class="description-icon" name="restaurant"></ion-icon>
      <ion-label>{{ listing.measure_unit }} </ion-label>
      <h2 item-right>{{ listing.unit_value }}</h2>
    </ion-item>

  </ion-list>

  <ion-list>
    <ion-list-header>Location</ion-list-header>
    <section #map id="map" class="map-location">
      <div id="map">
      </div>
    </section>
  </ion-list>

  <ion-list>
    
    <ion-list-header>Seller information</ion-list-header>
    <ion-item no-lines item-left class="item-profile">
      <ion-avatar item-left>
        <img src="{{ listing.short_profile?.image }}">
      </ion-avatar>
      <h2>{{listing.short_profile?.fullName}}</h2>
    </ion-item>

  	<ion-item-divider></ion-item-divider>
    <button ion-item (click)="showReviews()" no-lines>
    <ion-icon item-left name='chatbubbles'></ion-icon>
      <ion-label>Reviews ({{listing.total_reviews}})</ion-label>
      <h1 item-right>
        <rating class="reviews-button-rate" [ngModel]="listing.total_rate" max="5" read-only="true"></rating>
      </h1>
    </button> 

<!--   	<ion-item no-lines>
  		<ion-icon item-left name='chatbubbles'></ion-icon>
      <ion-label>Reviews ({{total_reviews}})</ion-label>
      <h2 item-right>
        <rating [ngModel]="listing.total_rate" max="5" read-only="true"></rating>
			</h2>
  	</ion-item>	 -->
    </ion-list>

    <ion-list>
      <ion-item no-lines>
        <h2>Payment Methods</h2>
        <img src="./assets/images/cards.jpeg" height="30px">
        <!-- <span>Paypal, Visa, MasterCard, American Express, Discover</span> -->
        <p>Yuplate keep your payment informations secure.</p>
        <p>Sellers don't receive your credit card information.</p>
      </ion-item>
    </ion-list>

    <ion-list *ngIf="listing.shipping">
      <ion-item-divider>
        Shipping informations
      </ion-item-divider>
      <ion-item no-lines>
        <h2>Shipping fee</h2>
        {{listing.shepping_fee}}
      </ion-item>
      <ion-item no-lines>
        <h2>Informations</h2>
        {{listing.shepping_note}}
      </ion-item>
    </ion-list>

    <ion-list *ngIf="listing.delivery || listing.carryout">
		<ion-list-header>Local Schedule</ion-list-header>
  	<ion-item *ngFor="let schedule of listing.schedule">
  		<ion-row>
		    <ion-col width-100 class="schedule-data">
		      <div class="data-item">
		        <div class="item-content">

		          <h2 class="item-title ">
		            <ion-icon class="title-icon" ios="ios-calendar" md="md-calendar">
		            </ion-icon>
		            {{ schedule?.day }}
		          </h2>

		          <div class="item-description">
		            <h2 class="description-text">
		              <ion-icon class="description-icon" name="clock"></ion-icon>
		              <span class="description-label">From: </span>{{ schedule?.from_time }} -
		              <span class="description-label">To: </span>{{ schedule?.to_time }}
		            </h2>
		          </div>

		        </div>
		      </div>
		    </ion-col>
		  </ion-row>
		</ion-item>

  </ion-list>

</ion-content>

<ion-footer>
	<ion-toolbar class="listing-detail-footer">
		<ion-row class="footer-row">
			<ion-col width-60>
				<div class="footer-text">
					{{ listing.currency }}
     			{{ listing.main_price }}
   			</div>
<!--         <div class="footer-rate">
          <rating  [ngModel]="listing.total_rate" max="5" read-only="true"></rating>
        </div> -->
			</ion-col>
			<ion-col width-40>
				<button class="button-order" ion-button small icon-left (click)="presentOrderModal()">
		      <ion-icon name="restaurant" md="md-restaurant"></ion-icon>
		      Order
		  	</button>
			</ion-col>
		</ion-row>
	</ion-toolbar>
</ion-footer>
